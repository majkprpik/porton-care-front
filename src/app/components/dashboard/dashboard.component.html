<div class="dashboard-header">
  <h1>Houses Dashboard</h1>
  45 KUCICA / 21 SLOBODNA / 24 ZAUZETE / 12 ODLAZAKA / 19 DOLAZAKA
  <div class="stats-container">
    <!-- <div class="stat-card">
    </div> -->
    <!-- <div class="stat-card">
      <span class="stat-value">{{getFreeHousesCount()}}</span>
      <span class="stat-label">Free Houses</span>
    </div>
    <div class="stat-card">
      <span class="stat-value">{{getOccupiedHousesCount()}}</span>
      <span class="stat-label">Occupied Houses</span>
    </div>
  </div> -->
</div>


<div class="houses-container">
  <!-- Houses layout with categorized rows -->
  <div class="houses-wrapper">
    <!-- Get filtered and sorted homes -->
    <ng-container *ngIf="getCategorizedHomes() as categorizedHomes">
      <!-- Row 3: Houses with tasks in progress -->
      <div class="house-category-row" *ngIf="categorizedHomes.inProgressHomes.length > 0">
        <div class="category-header in-progress">
          <div class="category-label">U tijeku ({{categorizedHomes.inProgressHomes.length}})</div>
          <div class="teams-header">Osoblje</div>
        </div>
        <div class="houses-row in-progress">
          <div>
            <app-mobile-home-card 
            *ngFor="let house of categorizedHomes.inProgressHomes" 
            [mobileHome]="house">
            </app-mobile-home-card>

          </div>
        <div class="team-boxes">
          <div class="team-box red expandable" [ngClass]="{'expanded': areTeamBoxesExpanded}" (click)="toggleTeamBox($event)">
            <div class="team-letter">S1</div>
            <div class="team-members">
              <div class="team-member">Marko Maric</div>
              <div class="team-member">Marko Maric</div>
            </div>
          </div>
          <div class="team-box blue expandable" [ngClass]="{'expanded': areTeamBoxesExpanded}" (click)="toggleTeamBox($event)">
            <div class="team-letter">S2</div>
            <div class="team-members">
              <div class="team-member">Marko Maric</div>
              <div class="team-member">Marko Maric</div>
            </div>
          </div>
          <div class="team-box green expandable" [ngClass]="{'expanded': areTeamBoxesExpanded}" (click)="toggleTeamBox($event)">
            <div class="team-letter">Majstori</div>
            <div class="team-members">
              <div class="team-member">Marko Maric</div>
              <div class="team-member">Marko Maric</div>
            </div>
          </div>
          <div class="team-box black expandable" [ngClass]="{'expanded': areTeamBoxesExpanded}" (click)="toggleTeamBox($event)">
            <div class="team-letter">Recepcija</div>
            <div class="team-members">
              <div class="team-member">Marko Maric</div>
              <div class="team-member">Marko Maric</div>
            </div>
          </div>
          <div class="team-box yellow expandable" [ngClass]="{'expanded': areTeamBoxesExpanded}" (click)="toggleTeamBox($event)">
            <div class="team-letter">CS</div>
            <div class="team-members">
              <div class="team-member">Marko Maric</div>
              <div class="team-member">Marko Maric</div>
            </div>
          </div>
        </div>
        </div>
      </div>
      
      <!-- Row 4: Other houses -->
      <div class="house-category-row" *ngIf="categorizedHomes.othersHomes.length > 0">
        <div class="category-header">
          <div class="category-label">Dodjeljeno ({{getTotalAssignedTasks()}} zadataka / {{categorizedHomes.othersHomes.length}} kuÄ‡ica)</div>
        </div>
        <div class="houses-row">
          <app-mobile-home-card 
            *ngFor="let house of categorizedHomes.othersHomes" 
            [mobileHome]="house">
          </app-mobile-home-card>
        </div>
      </div>

      <div class="house-category-row" *ngIf="categorizedHomes.freeHomes.length > 0 || categorizedHomes.occupiedNoTasksHomes.length > 0">
        <div class="category-header">
          <div class="category-label">Ostale (Slobodne: {{categorizedHomes.freeHomes.length}}, Zauzete: {{categorizedHomes.occupiedNoTasksHomes.length}})</div>
        </div>
        <div class="houses-row">
          <app-mobile-home-card 
            *ngFor="let house of categorizedHomes.freeHomes" 
            [mobileHome]="house">
          </app-mobile-home-card>
          <app-mobile-home-card 
          *ngFor="let house of categorizedHomes.occupiedNoTasksHomes" 
          [mobileHome]="house">
        </app-mobile-home-card>
        </div>
      </div>
    </ng-container>
  </div>
</div>


<!-- News Feed Component -->
<app-news-feed></app-news-feed>